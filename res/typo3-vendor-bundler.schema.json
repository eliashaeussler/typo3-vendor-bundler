{
	"$schema": "http://json-schema.org/draft-06/schema#",
	"type": "object",
	"title": "TYPO3 Vendor Bundler config file schema",
	"properties": {
		"autoload": {
			"$ref": "#/definitions/autoload"
		},
		"dependencies": {
			"$ref": "#/definitions/dependencies"
		},
		"pathToVendorLibraries": {
			"type": "string",
			"title": "Absolute or relative path to composer.json where vendor libraries are managed",
			"default": "Resources/Private/Libs"
		},
		"rootPath": {
			"type": "string",
			"title": "Relative or absolute path to project root",
			"description": "This path will be used to calculate paths to configured files if they are configured as relative paths. If the root path is configured as relative path, it is calculated based on the config file path."
		}
	},
	"additionalProperties": false,
	"definitions": {
		"autoload": {
			"type": "object",
			"title": "Set of options used to bundle autoload configuration",
			"properties": {
				"target": {
					"$ref": "#/definitions/autoloadTarget"
				},
				"backupSources": {
					"type": "boolean",
					"title": "Define whether to backup source files",
					"description": "When enabled, original contents of source files, which are to be modified, will be backed up in a separate file",
					"default": false
				},
				"excludeFromClassMap": {
					"type": "array",
					"title": "List of files to exclude from vendor libraries class map",
					"description": "Absolute or relative paths to files to remove from parsed vendor libraries class map",
					"items": {
						"type": "string",
						"minLength": 1
					}
				}
			},
			"additionalProperties": false
		},
		"autoloadTarget": {
			"type": "object",
			"title": "Set of options used to define the target for bundled autoload configuration",
			"properties": {
				"file": {
					"type": "string",
					"title": "File where to bundle autoload configuration",
					"description": "This is usually the root `composer.json` file of an extension",
					"default": "composer.json"
				},
				"overwrite": {
					"type": "boolean",
					"title": "Define whether to overwrite the target file, if it already exists",
					"description": "When enabled, the configured target file will be overwritten with the bundled autoload information, if the file already exists",
					"default": false
				}
			},
			"additionalProperties": false
		},
		"dependencies": {
			"type": "object",
			"title": "Set of options used to bundle dependency information",
			"properties": {
				"sbom": {
					"$ref": "#/definitions/sbom"
				}
			},
			"additionalProperties": false
		},
		"sbom": {
			"type": "object",
			"title": "Set of options used to define SBOM file generation",
			"properties": {
				"file": {
					"type": "string",
					"title": "File where to write the serialized SBOM",
					"description": "Can be a JSON or XML file. Relative paths are resolved based on the vendor libraries path.",
					"default": "sbom.json"
				},
				"version": {
					"type": "string",
					"title": "CycloneDX BOM version to use",
					"description": "All BOM versions supported by CycloneDX can be used.",
					"default": "1.7"
				},
				"includeDev": {
					"type": "boolean",
					"title": "Define whether to include dev dependencies in the serialized SBOM",
					"description": "When enabled, all dev dependencies will be included in the generated SBOM. Otherwise, only production dependencies will be included.",
					"default": true
				},
				"overwrite": {
					"type": "boolean",
					"title": "Define whether to overwrite the SBOM file, if it already exists",
					"description": "When enabled, the configured SBOM file will be overwritten with serialized SBOM, if the file already exists.",
					"default": false
				}
			},
			"additionalProperties": false
		}
	}
}
